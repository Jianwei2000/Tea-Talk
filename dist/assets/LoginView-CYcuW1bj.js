import{u as v,r as i,d as f,f as _,w as h,g as e,A as w,i as r,z as c,F as g,h as u,b as x,c as b,l as k}from"./index-De0Ru6L5.js";import{S as d}from"./sweetalert2.all-wg-7VLTu.js";const y=e("div",{class:"loader-container"},[e("div",{class:"loader"}),e("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1),V={class:"container my-10"},T={class:"col-md-3"},B=e("h1",{class:"h3 mb-3 fw-bold text-center"},"後台登入",-1),L={class:"mb-2"},$=e("label",{for:"username",class:"sr-only"},[e("span",{class:"text-danger"},"*"),u("帳號")],-1),C={class:"mb-2"},N=e("label",{for:"password",class:"sr-only"},[e("span",{class:"text-danger"},"*"),u("密碼")],-1),S=e("div",{class:"text-end"},[e("button",{class:"btn btn-lg btn-dark btn-block my-4",type:"submit"},"登入")],-1),M={__name:"LoginView",setup(q){const l=v(),a=i(!1),t=i({username:"",password:""});function m(){a.value=!0,console.log("login"),k.post("https://vue3-course-api.hexschool.io/v2/admin/signin",t.value).then(s=>{const{token:n,expired:o}=s.data;console.log(n,o),document.cookie=`TeaTalkToken=${n}; expired=${new Date(o)}`,console.log(s),l.push("/admin"),d.fire({icon:"success",title:"登入成功",showConfirmButton:!1,timer:2e3}),a.value=!1}).catch(()=>{l.push("/login"),d.fire({icon:"error",title:"登入失敗",text:"請重新登入!"}),a.value=!1})}return(p,s)=>{const n=x("VLoading");return b(),f(g,null,[_(n,{active:a.value},{default:h(()=>[y]),_:1},8,["active"]),e("div",V,[e("form",{class:"row justify-content-center",onSubmit:s[2]||(s[2]=w(o=>m(),["prevent"]))},[e("div",T,[B,e("div",L,[$,r(e("input",{type:"email",id:"username",class:"form-control",placeholder:"email",required:"",autofocus:"","onUpdate:modelValue":s[0]||(s[0]=o=>t.value.username=o)},null,512),[[c,t.value.username]])]),e("div",C,[N,r(e("input",{type:"password",id:"password",class:"form-control",placeholder:"Password",required:"","onUpdate:modelValue":s[1]||(s[1]=o=>t.value.password=o)},null,512),[[c,t.value.password]])]),S])],32)])],64)}}};export{M as default};
