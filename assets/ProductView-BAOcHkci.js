import{r as p,D as V,u as R,x as T,o as j,d as c,f as v,w as _,g as e,q as F,t as a,j as y,i as L,z as q,F as B,h,l as m,e as x,b as w,c as l}from"./index-BrIGW_gG.js";import{R as U}from"./RandomSwiper-COxHRV41.js";import{S as D}from"./sweetalert2.all-BnPowrEE.js";import{u as E}from"./favoriteStore-CCWJpQTd.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const P=e("div",{class:"loader-container"},[e("div",{class:"loader"}),e("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1),z={class:"container my-7"},M={class:"row"},I={class:"product-img col-md-7"},A={class:"border"},G={class:"col-md-5"},H={class:"mt-3 mt-md-0"},J={"aria-label":"breadcrumb "},K={class:"breadcrumb"},Q={class:"breadcrumb-item"},W=e("i",{class:"bi bi-house-door-fill"},null,-1),X={class:"breadcrumb-item active","aria-current":"page"},Y={class:"breadcrumb-item active","aria-current":"page"},Z={class:"d-flex justify-content-between"},ee={class:"fw-bold mb-4 fs-2"},te={key:0,class:"material-icons-outlined pfav position-absolute text-danger"},oe=e("i",{class:"bi bi-heart-fill"},null,-1),se=[oe],ae={key:1,class:"material-icons-outlined pfav position-absolute text-danger"},ie=e("i",{class:"bi bi-heart"},null,-1),ne=[ie],ce={class:"product-description lh-lg mt-4 p-3 rounded-3 fs-6 shadow"},le={class:"input-group m-0 row"},re={key:0,class:"price fw-bold text-primary mt-4 text-end"},de={key:1,class:"origin-price d-flex flex-column align-items-end mt-4"},ue={class:"pe-2 text-primary fw-bold"},pe={class:"text-decoration-line-through ps-2"},ve={class:"accordion rounded-3 shadow mt-4",id:"accordionPanelsStayOpenExample"},_e={class:"accordion-item"},me=e("div",{class:"accordion-button text-standard","data-bs-toggle":"collapse","data-bs-target":"#panelsStayOpen-collapseOne","aria-expanded":"true","aria-controls":"panelsStayOpen-collapseOne"}," 商品詳細說明 ",-1),he={id:"panelsStayOpen-collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"panelsStayOpen-headingOne"},be={class:"accordion-body lh-lg border-top border-1 border-primary"},fe={class:"container my-6 products-selected"},ge=e("h2",{class:"fs-2 text-primary fw-bold mb-5"},[h(" 精選推薦 "),e("span",{class:"fs-5 dancing-script"},"Selected")],-1),Oe={__name:"ProductView",setup(ye){const i=p(!1),k=E(),{toggleFavorite:$,isFavorite:S}=k,o=p({imageUrl:"",title:"",origin_price:0,price:0,description:"",content:""}),b=V(),O=R();function f(s=b.params.id){i.value=!0,document.documentElement.scrollTop=0,m.get(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/product/${s}`).then(t=>{o.value=t.data.product,console.log(t.data),i.value=!1}).catch(t=>{console.error("錯誤訊息:",t.response),i.value=!1})}const r=p(""),d=p(1);function C(s,t=1){i.value=!0,r.value=s,m.post("https://vue3-course-api.hexschool.io/v2/api/kjwapi/cart",{data:{product_id:s,qty:t}}).then(()=>{r.value="",x.emit("get-cart"),D.fire({position:"top-end",icon:"success",title:"已加入購物車",showConfirmButton:!1,timer:1e3}),i.value=!1}).catch(n=>{console.error(n.response)})}function N(s,t=1){r.value=s,m.post("https://vue3-course-api.hexschool.io/v2/api/kjwapi/cart",{data:{product_id:s,qty:t}}).then(()=>{r.value="",x.emit("get-cart"),O.push("/cart")}).catch(n=>{console.error(n.response)})}return T(()=>b.params.id,s=>{s&&f(s)}),j(()=>{f()}),(s,t)=>{const n=w("VLoading"),g=w("RouterLink");return l(),c(B,null,[v(n,{active:i.value},{default:_(()=>[P]),_:1},8,["active"]),e("div",z,[e("div",M,[e("div",I,[e("div",A,[e("div",{class:"product-img-imageUrl",style:F({backgroundImage:`url(${o.value.imageUrl})`})},null,4)])]),e("div",G,[e("div",H,[e("nav",J,[e("ol",K,[e("li",Q,[v(g,{to:"/",class:"fw-bold text-decoration-none"},{default:_(()=>[W,h(" 首頁")]),_:1})]),e("li",X,[v(g,{to:"/products",class:"text-decoration-none"},{default:_(()=>[h("所有商品")]),_:1})]),e("li",Y,a(o.value.category),1)])]),e("div",Z,[e("h1",ee,a(o.value.title),1),e("div",{class:"fs-3 pfav-icon position-relative",onClick:t[0]||(t[0]=u=>y($)(o.value))},[y(S)(o.value.id)?(l(),c("span",te,se)):(l(),c("span",ae,ne))])]),e("h2",ce,a(o.value.description),1),L(e("input",{type:"number",class:"form-control mt-5",min:"1",max:"10","onUpdate:modelValue":t[1]||(t[1]=u=>d.value=u)},null,512),[[q,d.value,void 0,{number:!0}]]),e("div",le,[e("button",{class:"btn border border-dark col-6 rounded-0",onClick:t[2]||(t[2]=u=>C(o.value.id,d.value))}," 加入購物車 "),e("button",{onClick:t[3]||(t[3]=u=>N(o.value.id,d.value)),class:"btn btn-dark col-6 rounded-0"}," 立即購買 ")]),o.value.origin_price===o.value.price?(l(),c("div",re," NT$ "+a(s.$filters.currency(o.value.price))+" 元 ",1)):(l(),c("div",de,[e("div",ue," NT$ "+a(s.$filters.currency(o.value.price))+" 元 ",1),e("del",pe," NT$ "+a(s.$filters.currency(o.value.origin_price))+" 元",1)])),e("div",ve,[e("div",_e,[me,e("div",he,[e("div",be,a(o.value.content),1)])])])])])]),e("div",fe,[ge,v(U)])])],64)}}};export{Oe as default};
