import{R as L}from"./RandomSwiper-CXXRZW1y.js";import{r as d,u as N,o as R,d as i,f as _,w as f,g as t,j as l,C as B,F as b,k as q,h as P,l as p,b as g,c,t as k,e as x}from"./index-B6NfvoMi.js";import{u as A}from"./favoriteStore-B-d2UUn5.js";import{S as D}from"./sweetalert2.all-2OC8-NOp.js";import"./plugin-vueexport-helper-DlAUqK2U.js";const E=t("div",{class:"loader-container"},[t("div",{class:"loader"}),t("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1),I=t("div",{class:"banner-fav position-relative mt-5"},[t("div",{class:"container position-absolute top-50 start-50 translate-middle text-center"},[t("h1",{class:"text-white"},"收藏項目"),t("h2",{class:"h4 text-white"},"還在猶豫你念念不忘的商品嗎？趕快加入購物車吧！")])],-1),M={class:"container my-5"},T={key:0,class:"text-center"},U=t("h2",{class:"text-muted mt-7"},"尚無收藏紀錄",-1),z=t("p",{class:"h4 text-muted my-4"},"趕快前往商品頁面，將喜歡的商品加入收藏吧！",-1),G={class:"row justify-content-center"},H={class:"list-unstyled mx-auto col-md-8"},J={class:"card shadow mb-5"},K={class:"row g-0"},O={class:"col-md-4"},Q=["src"],W={class:"col-md-8 py-5 position-relative"},X=["onClick"],Y={key:0,class:"material-icons-outlined fav position-absolute text-danger"},Z=t("i",{class:"bi bi-heart-fill"},null,-1),tt=[Z],st={key:1,class:"material-icons-outlined fav position-absolute text-white"},et=t("i",{class:"bi bi-heart"},null,-1),ot=[et],at={class:"card-body"},it={class:"card-title fw-bold fs-4"},ct={class:"card-text"},nt={class:"input-group justify-content-center mt-4"},lt=["onClick"],rt=["onClick"],dt={class:"container mt-5 products-selected"},ut=t("h2",{class:"fs-2 text-primary fw-bold mb-5"},[P(" 精選推薦 "),t("span",{class:"fs-5 dancing-script"},"Selected")],-1),bt={__name:"FavoriteView",setup(_t){const o=d(!1),h=N(),u=A(),{favorites:w}=u,{toggleFavorite:y,isFavorite:C}=u,$=d([]);function S(){o.value=!0,p.get("https://vue3-course-api.hexschool.io/v2/api/kjwapi/products/all").then(s=>{$.value=s.data.products,console.log(s.data),o.value=!1}).catch(s=>{console.error(s.response),o.value=!1})}const r=d(""),m=d(1);function V(s,a=1){o.value=!0,r.value=s,p.post("https://vue3-course-api.hexschool.io/v2/api/kjwapi/cart",{data:{product_id:s,qty:a}}).then(()=>{r.value="",x.emit("get-cart"),D.fire({position:"top-end",icon:"success",title:"已加入購物車",showConfirmButton:!1,timer:1e3}),o.value=!1}).catch(n=>{console.error(n.response)})}function j(s,a=1){r.value=s,p.post("https://vue3-course-api.hexschool.io/v2/api/kjwapi/cart",{data:{product_id:s,qty:a}}).then(()=>{r.value="",x.emit("get-cart"),h.push("/cart")}).catch(n=>{console.error(n.response)})}return R(()=>{S()}),(s,a)=>{const n=g("VLoading"),F=g("RouterLink");return c(),i(b,null,[_(n,{active:o.value},{default:f(()=>[E]),_:1},8,["active"]),I,t("div",M,[l(u).favoriteCount<1?(c(),i("div",T,[U,z,t("div",{class:"btn btn-primary btn-lg my-4",onClick:a[0]||(a[0]=e=>l(h).push("/products"))},"前往選購")])):B("",!0),t("div",G,[t("ul",H,[(c(!0),i(b,null,q(l(w),e=>(c(),i("li",{key:e.id},[t("div",J,[t("div",K,[t("div",O,[_(F,{to:`/product/${e.id}`},{default:f(()=>[t("img",{src:e.imageUrl,class:"fav-img rounded-start",alt:"..."},null,8,Q)]),_:2},1032,["to"])]),t("div",W,[t("div",{class:"fs-3 favorite-icon position-absolute position-relative",onClick:v=>l(y)(e)},[l(C)(e.id)?(c(),i("span",Y,tt)):(c(),i("span",st,ot))],8,X),t("div",at,[t("h5",it,k(e.title),1),t("p",ct,k(e.description),1)]),t("div",nt,[t("button",{class:"btn border border-dark col-md-4 rounded-0",onClick:v=>V(e.id,m.value)}," 加入購物車 ",8,lt),t("button",{onClick:v=>j(e.id,m.value),class:"btn btn-dark col-md-4 rounded-0"}," 立即購買 ",8,rt)])])])])]))),128))])]),t("div",dt,[ut,_(L)])])],64)}}};export{bt as default};
