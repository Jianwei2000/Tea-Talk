import{_ as g}from"./PaginationCom-DFipVGds.js";import{r,o as y,d as l,f as v,w as k,g as t,F as u,k as b,t as e,h as d,s as p,l as w,b as $,c as o}from"./index-BrIGW_gG.js";const L=t("div",{class:"loader-container"},[t("div",{class:"loader"}),t("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1),C={class:"container mt-5"},D=t("div",{class:"d-flex justify-content-between"},[t("h3",{class:"fw-bold"},[t("i",{class:"bi bi-list-check"}),d(" 訂單列表")])],-1),M={class:"table table-striped mt-4 text-dark"},N=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",{class:"d-none d-md-table-cell"},"下單時間"),t("th",null,"訂單狀態"),t("th",null,"操作")])],-1),V={class:"text-truncate"},B={class:"d-none d-md-table-cell"},S={class:"text-muted small"},T={key:0,class:"fw-bold text-success"},j={key:1},F=["onClick"],O={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},q={class:"modal-dialog modal-md",role:"document"},z={class:"modal-content border-0"},A=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},[t("span",null,"訂單明細")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},G={class:"row"},P={class:"col-10 mx-auto my-2"},H=t("div",{class:"text-muted mb-2"},"訂單編號:",-1),I={class:"col-10 mx-auto my-2"},J={class:"col-10 mx-auto my-2"},K=t("div",{class:"text-muted mb-2"},"訂購人資訊:",-1),Q=t("br",null,null,-1),R=t("br",null,null,-1),U=t("br",null,null,-1),W=t("br",null,null,-1),X={class:"col-10 mx-auto my-2"},Y=t("div",{class:"text-muted mb-2"},"購買清單:",-1),Z=t("hr",null,null,-1),tt={class:"col-10 mx-auto my-2"},et=t("div",{class:"text-muted mb-2"},"訂單狀態:",-1),st={key:0,class:"fw-bold text-success"},at={key:1},lt=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"}," 確定 ")],-1),ct={__name:"AdminOrder",setup(ot){const c=r(!1),_=r([]),m=r({});function h(n=1){c.value=!0,w.get(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/admin/orders?page=${n}`).then(i=>{console.log(i.data),_.value=i.data.orders,m.value=i.data.pagination,c.value=!1}).catch(i=>{console.error(i.response),c.value=!1})}const s=r({user:{name:"",email:"",tel:"",address:""}});function x(n){s.value=n}return y(()=>{h()}),(n,i)=>{const f=$("VLoading");return o(),l(u,null,[v(f,{active:c.value},{default:k(()=>[L]),_:1},8,["active"]),t("div",C,[D,t("table",M,[N,t("tbody",null,[(o(!0),l(u,null,b(_.value,a=>(o(),l("tr",{key:a.id},[t("td",V,e(a.id),1),t("td",B,[t("i",S," 訂單時間: "+e(new Date(a.create_at*1e3).toLocaleDateString()),1)]),t("td",{class:p({"text-muted":!a.is_paid})},[a.is_paid?(o(),l("i",T," 已成立")):(o(),l("i",j," 未成立"))],2),t("td",null,[t("button",{class:"btn btn-dark btn-sm","data-bs-toggle":"modal","data-bs-target":"#orderModal",onClick:dt=>x(a)}," 查看明細 ",8,F)])]))),128))])]),v(g,{pages:m.value,onGetPage:h},null,8,["pages"]),t("div",O,[t("div",q,[t("div",z,[A,t("div",E,[t("div",G,[t("div",P,[H,t("div",null,e(s.value.id),1)]),t("div",I,[t("i",null,e(new Date(s.value.create_at*1e3).toLocaleDateString()),1)]),t("div",J,[K,t("div",null,[d(" 訂購人: "+e(s.value.user.name)+" ",1),Q,d(" email: "+e(s.value.user.email)+" ",1),R,d(" 連絡電話: "+e(s.value.user.tel)+" ",1),U,d(" 地址: "+e(s.value.user.address)+" ",1),W,d(" 備註: "+e(s.value.message),1)])]),t("div",X,[Y,(o(!0),l(u,null,b(s.value.products,a=>(o(),l("div",{class:"",key:a.id},e(a.product.title)+" NT$"+e(n.$filters.currency(a.product.price))+" x "+e(a.qty),1))),128)),Z,d(" 總金額：NT$"+e(n.$filters.currency(s.value.total)),1)]),t("div",tt,[et,t("div",{class:p(["text-dark",{"text-muted":s.value.is_paid===!1}])},[s.value.is_paid?(o(),l("i",st," 已成立")):(o(),l("i",at," 未成立"))],2)])])]),lt])])])])],64)}}};export{ct as default};
