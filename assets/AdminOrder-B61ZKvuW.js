import{_ as g}from"./PaginationCom-Dv-xaTeA.js";import{r,o as y,d as l,f as v,w as k,g as t,F as u,k as b,t as e,h as i,s as p,l as w,b as $,c as o}from"./index-BDp_ss3W.js";const L=t("div",{class:"loader-container"},[t("div",{class:"loader"}),t("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1),C={class:"container mt-5"},D=t("div",{class:"d-flex justify-content-between"},[t("h3",{class:"fw-bold"},[t("i",{class:"bi bi-list-check"}),i(" 訂單列表")])],-1),M={class:"table table-striped mt-4 text-dark"},N=t("thead",null,[t("tr",null,[t("th",null,"訂單編號"),t("th",{class:"d-none d-md-table-cell"},"下單時間"),t("th",null,"訂單狀態"),t("th",null,"操作")])],-1),V={class:"text-truncate"},B={class:"d-none d-md-table-cell"},S={class:"text-muted small"},T={key:0,class:"fw-bold text-success"},j={key:1},F=["onClick"],O={class:"modal fade",id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},q={class:"modal-dialog modal-md",role:"document"},z={class:"modal-content border-0"},A=t("div",{class:"modal-header bg-dark text-white"},[t("h5",{class:"modal-title",id:"exampleModalLabel"},[t("span",null,"訂單明細")]),t("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),E={class:"modal-body"},G={class:"row"},P={class:"col-10 mx-auto my-2"},H=t("div",{class:"text-muted mb-2"},"訂單編號:",-1),I={class:"col-10 mx-auto my-2"},J={class:"col-10 mx-auto my-2"},K=t("div",{class:"text-muted mb-2"},"訂購人資訊:",-1),Q=t("br",null,null,-1),R=t("br",null,null,-1),U=t("br",null,null,-1),W={class:"col-10 mx-auto my-2"},X=t("div",{class:"text-muted mb-2"},"購買清單:",-1),Y=t("hr",null,null,-1),Z={class:"col-10 mx-auto my-2"},tt=t("div",{class:"text-muted mb-2"},"訂單狀態:",-1),et={key:0,class:"fw-bold text-success"},st={key:1},at=t("div",{class:"modal-footer"},[t("button",{type:"button",class:"btn btn-dark","data-bs-dismiss":"modal","aria-label":"Close"}," 確定 ")],-1),it={__name:"AdminOrder",setup(lt){const c=r(!1),_=r([]),m=r({});function h(d=1){c.value=!0,w.get(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/admin/orders?page=${d}`).then(n=>{console.log(n.data),_.value=n.data.orders,m.value=n.data.pagination,c.value=!1}).catch(n=>{console.error(n.response),c.value=!1})}const s=r({user:{name:"",email:"",tel:"",address:""}});function x(d){s.value=d}return y(()=>{h()}),(d,n)=>{const f=$("VLoading");return o(),l(u,null,[v(f,{active:c.value},{default:k(()=>[L]),_:1},8,["active"]),t("div",C,[D,t("table",M,[N,t("tbody",null,[(o(!0),l(u,null,b(_.value,a=>(o(),l("tr",{key:a.id},[t("td",V,e(a.id),1),t("td",B,[t("i",S," 訂單時間: "+e(new Date(a.create_at*1e3).toLocaleDateString()),1)]),t("td",{class:p({"text-muted":!a.is_paid})},[a.is_paid?(o(),l("i",T," 已成立")):(o(),l("i",j," 未成立"))],2),t("td",null,[t("button",{class:"btn btn-dark btn-sm","data-bs-toggle":"modal","data-bs-target":"#orderModal",onClick:ot=>x(a)}," 查看明細 ",8,F)])]))),128))])]),v(g,{pages:m.value,onGetPage:h},null,8,["pages"]),t("div",O,[t("div",q,[t("div",z,[A,t("div",E,[t("div",G,[t("div",P,[H,t("div",null,e(s.value.id),1)]),t("div",I,[t("i",null,e(new Date(s.value.create_at*1e3).toLocaleDateString()),1)]),t("div",J,[K,t("div",null,[i(" 訂購人: "+e(s.value.user.name)+" ",1),Q,i(" email: "+e(s.value.user.email)+" ",1),R,i(" 連絡電話: "+e(s.value.user.tel)+" ",1),U,i(" 地址: "+e(s.value.user.address),1)])]),t("div",W,[X,(o(!0),l(u,null,b(s.value.products,a=>(o(),l("div",{class:"",key:a.id},e(a.product.title)+" NT$"+e(d.$filters.currency(a.product.price))+" x "+e(a.qty),1))),128)),Y,i(" 總金額：NT$"+e(d.$filters.currency(s.value.total)),1)]),t("div",Z,[tt,t("div",{class:p(["text-dark",{"text-muted":s.value.is_paid===!1}])},[s.value.is_paid?(o(),l("i",et," 已成立")):(o(),l("i",st," 未成立"))],2)])])]),at])])])])],64)}}};export{it as default};
