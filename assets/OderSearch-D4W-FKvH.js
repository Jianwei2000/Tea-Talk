import{r as h,d as n,f as r,w as m,g as t,t as o,C as w,F as y,k as N,l as D,b as i,c as d,h as E,s as I,p as B,n as T}from"./index-B6NfvoMi.js";import{S as j}from"./sweetalert2.all-2OC8-NOp.js";import{_ as q}from"./plugin-vueexport-helper-DlAUqK2U.js";const e=c=>(B("data-v-e459f08b"),c=c(),T(),c),M=e(()=>t("div",{class:"loader-container"},[t("div",{class:"loader"}),t("div",{class:"text-white text-center fs-4 mt-2"},"喝杯熱茶，稍等片刻 ~ ~")],-1)),O=e(()=>t("div",{class:"banner-order-search position-relative mt-5"},[t("div",{class:"container position-absolute top-50 start-50 translate-middle text-center"},[t("h1",{class:"text-white"},"訂單追蹤"),t("h2",{class:"h4 text-white"},"訂單編號可至Email或簡訊查看")])],-1)),R={class:"container my-6"},z={"aria-label":" breadcrumb"},U={class:"breadcrumb"},X={class:"breadcrumb-item"},A=e(()=>t("i",{class:"bi bi-house-door-fill"},null,-1)),G=e(()=>t("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單查詢",-1)),H={class:"row justify-content-center"},J={class:"col-md-4"},K=e(()=>t("label",{for:"id",class:"h4 my-3 text-primary fw-bold"},"查詢訂單",-1)),P={class:"input-group mb-3"},Q=["disabled"],W={class:"row justify-content-center"},Y={class:"col-md-7"},Z={key:0,class:"px-3 border rounded-3 shadow mt-5"},tt=e(()=>t("h4",{class:"border-bottom border-3 border-warning p-3 text-center text-primary fw-bold"}," 訂單資訊 ",-1)),et={class:"table table-striped"},st=e(()=>t("th",null,"訂單時間",-1)),ot={class:""},lt={class:"me-2"},at={class:"text-muted fs-md-6 d-none d-sm-inline"},nt=e(()=>t("th",null,"訂單編號",-1)),dt={class:""},rt={class:"d-flex align-items-center"},it=e(()=>t("th",null,"訂購人",-1)),ct=e(()=>t("th",null,"Email",-1)),ut=e(()=>t("th",null,"聯絡電話",-1)),_t=e(()=>t("th",null,"寄送地址",-1)),ht={key:0},mt=e(()=>t("th",null,"備註",-1)),pt=e(()=>t("th",null,"總金額",-1)),bt=e(()=>t("h4",{class:"border-bottom border-3 border-warning p-3 pt-0 text-center text-primary fw-bold"}," 商品明細 ",-1)),vt={class:"table table-striped"},ft=e(()=>t("h4",{class:"border-bottom border-3 border-warning p-3 pt-0 text-center text-primary fw-bold"}," 狀態追蹤 ",-1)),xt={class:"table table-striped"},wt=e(()=>t("th",null,"訂單狀態",-1)),yt={key:0,class:"text-success fw-bold"},gt={key:1,class:"text-danger fw-bold"},Vt=e(()=>t("tr",null,[t("th",null,"物流進度"),t("td",{class:"text-muted"},"尚未出貨")],-1)),kt={__name:"OderSearch",setup(c){const u=h(!1),_=h(""),s=h({});function g(){u.value=!0,D.get(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/order/${_.value}`).then(l=>{l.data.order?(s.value=l.data.order,console.log(l.data)):j.fire({icon:"error",title:"編號錯誤",text:"找不到訂單",showConfirmButton:!1,timer:1500}),u.value=!1}).catch(l=>{console.error(l.response),u.value=!1})}return(l,p)=>{var b,v,f,x;const V=i("VLoading"),k=i("RouterLink"),S=i("VField"),L=i("ErrorMessage"),$=i("VForm");return d(),n(y,null,[r(V,{active:u.value},{default:m(()=>[M]),_:1},8,["active"]),O,t("div",R,[t("nav",z,[t("ol",U,[t("li",X,[r(k,{to:"/",class:"fw-bold text-decoration-none"},{default:m(()=>[A,E(" 首頁")]),_:1})]),G])]),t("div",H,[t("div",J,[r($,{onSubmit:g},{default:m(({errors:a,meta:C})=>[K,t("div",P,[r(S,{modelValue:_.value,"onUpdate:modelValue":p[0]||(p[0]=F=>_.value=F),id:"id",name:"編號",type:"text",class:I(["form-control",{"is-invalid":a.編號}]),placeholder:"輸入訂單編號",rules:"required"},null,8,["modelValue","class"]),t("button",{class:"btn btn-primary rounded-1",type:"submit",disabled:!C.valid}," 查尋 ",8,Q),r(L,{name:"編號",class:"invalid-feedback"})])]),_:1})])]),t("div",W,[t("div",Y,[s.value.id?(d(),n("div",Z,[tt,t("table",et,[t("tbody",null,[t("tr",null,[st,t("td",ot,[t("span",lt,o(new Date(s.value.paid_date*1e3).toLocaleDateString()),1),t("small",at,o(new Date(s.value.paid_date*1e3).toLocaleTimeString()),1)])]),t("tr",null,[nt,t("td",dt,[t("div",rt,o(s.value.id),1)])]),t("tr",null,[it,t("td",null,o((b=s.value.user)==null?void 0:b.name),1)]),t("tr",null,[ct,t("td",null,o((v=s.value.user)==null?void 0:v.email),1)]),t("tr",null,[ut,t("td",null,o((f=s.value.user)==null?void 0:f.tel),1)]),t("tr",null,[_t,t("td",null,o((x=s.value.user)==null?void 0:x.address),1)]),s.value.message?(d(),n("tr",ht,[mt,t("td",null,o(s.value.message),1)])):w("",!0),t("tr",null,[pt,t("td",null,"NTD$ "+o(l.$filters.currency(s.value.total))+" 元",1)])])]),bt,t("table",vt,[t("tbody",null,[(d(!0),n(y,null,N(s.value.products,a=>(d(),n("tr",{key:a.id},[t("th",null,o(a.product.title),1),t("td",null,"("+o(a.product.category)+")",1),t("td",null,"NT$"+o(l.$filters.currency(a.product.price)),1),t("td",null,"X "+o(a.qty),1)]))),128))])]),ft,t("table",xt,[t("tbody",null,[t("tr",null,[wt,s.value.is_paid?(d(),n("td",yt,"已成立")):(d(),n("td",gt,"未成立"))]),Vt])])])):w("",!0)])])])],64)}}},Ct=q(kt,[["__scopeId","data-v-e459f08b"]]);export{Ct as default};
