import{r as i,D as $,u as C,o as B,a as S,d as p,g as e,q as M,t as o,C as N,f as v,s as O,B as j,l as f,b as q,c as b}from"./index-B6NfvoMi.js";import{u as D}from"./orderStore-RYhqk0xt.js";import{S as R}from"./sweetalert2.all-2OC8-NOp.js";const T={class:"container my-8"},U=e("div",{class:"row my-3 text-center fs-6"},[e("div",{class:"col-4 text-primary fw-bold"},"1.購物清單"),e("div",{class:"col-4 text-primary fw-bold"},"2.填寫資料"),e("div",{class:"col-4 text-muted"},"3.完成訂單")],-1),z={class:"progress"},E=["aria-valuenow"],F={class:"d-flex justify-content-center my-5"},I={class:"col col-md-7 bg-light p-3 p-md-5 rounded-3 shadow"},A=e("h2",{class:"text-center border-bottom border-4 border-warning fs-3 fw-bold pb-3"}," 訂購資訊 ",-1),P={class:"table mt-4 fs-lg-5"},G=e("th",null,"訂單編號",-1),H=e("th",null,"訂購人",-1),J=e("th",null,"Email",-1),K=e("th",null,"聯絡電話",-1),L=e("th",null,"寄送地址",-1),Q={key:0},W=e("th",null,"備註",-1),X=e("th",null,"總金額",-1),Y={class:"my-3"},Z={class:"border p-3"},ee=e("h5",{class:"my-3"},"付款方式",-1),se={class:"my-3"},te={class:"form-check"},le=e("label",{class:"form-check-label",for:"getpay"}," 貨到付款 ",-1),oe={class:"form-check"},ae=e("label",{class:"form-check-label",for:"transfer"}," 銀行轉帳 ",-1),ne=e("p",{class:"my-3"},"ATM 轉帳繳款資料如下",-1),re={class:"table table-striped table-bordered text-dark"},de=e("tr",null,[e("th",null,"◆ 銀 行："),e("td",null,"008 華南商業銀行")],-1),ie=e("tr",null,[e("th",null,"◆ 戶 名："),e("td",null,"茶物語股份有限公司")],-1),ce=e("th",null,"◆ 帳 號：",-1),ue=e("span",null,"123-456-123456-7",-1),he=e("span",{class:"material-icons fs-6 ms-2"},[e("i",{class:"bi bi-copy"})],-1),_e=[he],be={__name:"CheckOut",setup(me){const y=D(),a=i("貨到付款"),l=i({}),n=$(),g=C();function k(s){f.get(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/order/${s}`).then(t=>{l.value=t.data.order}).catch(t=>{console.error(t.response)})}function w(){f.post(`https://vue3-course-api.hexschool.io/v2/api/kjwapi/pay/${n.params.id}`).then(s=>{console.log(s,s.data.message),y.setSelectedRadio(a.value),g.push(`/orderfinished/${n.params.id}`)}).catch(s=>{console.error(s.response,"讀取訂單")})}function x(){navigator.clipboard.writeText("1234561234567"),R.fire({icon:"success",title:"帳號已複製",showConfirmButton:!1,timer:1500})}const r=i(50);function V(s){r.value=s}return B(()=>{let s=50;const t=setInterval(()=>{s>=75?clearInterval(t):(s+=5,V(s))},50);k(n.params.id)}),S(()=>{}),(s,t)=>{var u,h,_,m;const c=q("VField");return b(),p("div",T,[U,e("div",z,[e("div",{class:"progress-bar bg-primary",role:"progressbar",style:M({width:r.value+"%"}),"aria-valuenow":r.value,"aria-valuemin":"0","aria-valuemax":"100"},null,12,E)]),e("div",F,[e("div",I,[A,e("table",P,[e("tbody",null,[e("tr",null,[G,e("td",null,o(l.value.id),1)]),e("tr",null,[H,e("td",null,o((u=l.value.user)==null?void 0:u.name),1)]),e("tr",null,[J,e("td",null,o((h=l.value.user)==null?void 0:h.email),1)]),e("tr",null,[K,e("td",null,o((_=l.value.user)==null?void 0:_.tel),1)]),e("tr",null,[L,e("td",null,o((m=l.value.user)==null?void 0:m.address),1)]),l.value.message?(b(),p("tr",Q,[W,e("td",null,o(l.value.message),1)])):N("",!0),e("tr",null,[X,e("td",null,"NTD$ "+o(s.$filters.currency(l.value.total))+" 元",1)])])]),e("div",Y,[e("div",Z,[ee,e("div",se,[e("div",te,[v(c,{id:"getpay",name:"paymentMethod",type:"radio",class:"form-check-input",rules:"required",value:"貨到付款",modelValue:a.value,"onUpdate:modelValue":t[0]||(t[0]=d=>a.value=d)},null,8,["modelValue"]),le]),e("div",oe,[v(c,{id:"transfer",name:"paymentMethod",type:"radio",class:"form-check-input",rules:"required",modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=d=>a.value=d),value:"銀行轉帳"},null,8,["modelValue"]),ae])]),e("div",{class:O({"d-none":a.value!=="銀行轉帳"})},[ne,e("table",re,[e("tbody",null,[de,ie,e("tr",null,[ce,e("td",null,[ue,e("a",{href:"#",onClick:j(x,["prevent"])},_e)])])])])],2)])]),e("div",{class:"btn btn-primary btn-lg w-100",onClick:w},"下一步")])])])}}};export{be as default};
